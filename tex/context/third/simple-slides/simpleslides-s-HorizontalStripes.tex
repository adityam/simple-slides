%D \module
%D   [      file=simpleslides-s-HorizontalStripes,
%D        version=2007.07.17, 
%D          title=\CONTEXT\ Style File,
%D       subtitle=Presentation Module HorizontalStripes,
%D         author=Thomas A. Schmitz,
%D           date=\PRESTITdate,
%D      copyright={Thomas A. Schmitz}]
%C
%C Copyright 2007 Thomas A. Schmitz.
%C This file may be distributed under the GNU General Public License v. 2.0.

%D This file provides the \filename{HorizontalStripes} style for the
%D presentation module. It is loaded at runtime. The look of this style was
%D inspired by the \quotation{Copenhagen} theme of the \LaTeX\ {\tt beamer}
%D package.

\writestatus{simpleslides}{loading HorizontalStripes style}

\startmodule[simpleslides-s-HorizontalStripes]

\unprotect

%D The page layout:

\setuplayout [width=fit,
              margin=0cm,
              height=fit,
              header=2.73cm, 
              footer=0.9cm, 
              topspace=0cm, 
              backspace=1cm,
              location=singlesided]

\setuplayout [simpleslides:layout:horizontal][header=2.73cm]
\setuplayout [simpleslides:layout:vertical]  [header=0cm]
\setuplayout [simpleslides:layout:title]     [header=0cm]

%D In this style, we don't want the ornament background for vertical slides:

\startsetups simpleslides:background:vertical
  \setuplayout[simpleslides:layout:vertical]
  \setupbackgrounds[\v!page]
        [background={simpleslides:background:vertical}]
\stopsetups



%D We also specify the position of the slidetitle.

\setuplayer[simpleslides:layer:slidetitle]
    [width=\paperwidth,
    height=\paperheight,
    x=10mm]

%D These macros are used for placing figures/pictures:

\define\NormalHeight{\textheight}
\define\NormalWidth{.476\textwidth}
\define\PictureFrameHeight{\textheight}
\define\PictureFrameWidth{.476\textwidth}

%D This module has three color schemes, blue, green and red.
\startsetups simpleslides:setups:blue
\definecolor [simpleslides:backgroundcolor]       [s=.95]
\definecolor [simpleslides:altcontrastcolor]      [r=.58,g=.58,b=.82]
\definecolor [simpleslides:contrastcolor]         [r=.2,g=.2,b=.73]
\definecolor [simpleslides:itemize:color]         [simpleslides:contrastcolor]
\stopsetups

\startsetups simpleslides:setups:red
\definecolor [simpleslides:backgroundcolor]       [s=.95]
\definecolor [simpleslides:altcontrastcolor]      [r=.82,g=.58,b=.58]
\definecolor [simpleslides:contrastcolor]         [r=.73,g=.2,b=.2]
\definecolor [simpleslides:itemize:color]         [simpleslides:contrastcolor]
\stopsetups

\startsetups simpleslides:setups:green
\definecolor [simpleslides:backgroundcolor]       [s=.95]
\definecolor [simpleslides:altcontrastcolor]      [r=.58,g=.82,b=.58]
\definecolor [simpleslides:contrastcolor]         [r=.2,g=.73,b=.2]
\definecolor [simpleslides:itemize:color]         [simpleslides:contrastcolor]
\stopsetups

%D Now we choose the scheme that the user asked for

\setups{simpleslides:setups:blue}
\setups{simpleslides:setups:\moduleparameter{simpleslides}{stylecolor}}

%D We let Metapost calculate the background:

\startuniqueMPgraphic{simpleslides:MP:horizontal} 
StartPage ;
numeric a ; a = 1.5mm ;
pair zd[] ;
path pb[] ;
fill Page withcolor \MPcolor{simpleslides:backgroundcolor} ;
z.d1 = ulcorner Page shifted (0,-a) ;
z.d2 = urcorner Page shifted (0,-a) ;
pb[1] = ulcorner Page -- z.d1 -- z.d2 -- urcorner Page -- cycle ;
z.d3 = llcorner Page shifted (0,a) ;
z.d4 = lrcorner Page shifted (0,a) ;
pb[3] = llcorner Page -- z.d3 -- z.d4 -- lrcorner Page -- cycle ;
pb[4] = pb[3] shifted (0,.75cm) ;
fill pb[1] withcolor \MPcolor{simpleslides:altcontrastcolor} ;
fill pb[3] withcolor \MPcolor{simpleslides:altcontrastcolor} ;
fill pb[4] withcolor \MPcolor{simpleslides:altcontrastcolor} ;
StopPage ;
\stopuniqueMPgraphic 

\startuniqueMPgraphic{simpleslides:MP:ornament}
StartPage ;
numeric a ; a = 1.5mm ;
pair zd[] ;
path pb[] ;
z.d1 = ulcorner Page shifted (0,-a) ;
z.d2 = urcorner Page shifted (0,-a) ;
pb[1] = ulcorner Page -- z.d1 -- z.d2 -- urcorner Page -- cycle ;
pb[2] = pb[1] shifted (0,-2cm) ;
fill pb[2] withcolor \MPcolor{simpleslides:altcontrastcolor} ;
StopPage ;
\stopuniqueMPgraphic

%D We define these backgrounds as overlays:

\defineoverlay 
   [simpleslides:background:horizontal] 
   [\useMPgraphic{simpleslides:MP:horizontal}] 
 
\defineoverlay 
  [simpleslides:background:vertical] 
  [\useMPgraphic{simpleslides:MP:horizontal}] 

\defineoverlay 
  [simpleslides:background:title] 
  [\useMPgraphic{simpleslides:MP:horizontal}] 

\defineoverlay 
  [simpleslides:background:ornament] 
  [\useMPgraphic{simpleslides:MP:ornament}] 

%D this sets up the title page:

\setupTitle
  [\c!title\c!color={simpleslides:contrastcolor},
   \c!author\c!color={simpleslides:contrastcolor},
   \c!date\c!color={simpleslides:contrastcolor}]

%D The slide title is typeset in a layer

\setupSlideTitle
  [\c!color={simpleslides:contrastcolor},
   \c!alternative=layer,
   \c!align=\v!center,
   \c!width=\textwidth,
   \c!height=2.2cm,
   \c!after=]

%D We define the footer

\setupfooter[color=simpleslides:contrastcolor,style={\switchtobodyfont[10pt]},strut=yes]
\setupfootertexts[{\framed[frame=off,height=0.65cm,width=\textwidth]{\moduleparameter{simpleslides:title}{title}\hfill \pagenumber \ of \lastpage}}]

%D The symbol for the first level of itemizations. 

\definesymbol[1][\useMPgraphic{simpleslides:itemize:square}]
\setupitemize[1][color={simpleslides:itemize:color}]

\protect
\stopmodule

\endinput

